<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard Breaker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Hero/Menu Screen -->
    <div id="heroScreen" class="hero-screen">
        <div class="hero-container">
            <h1 class="hero-title">ğŸš‚ KEYBOARD BREAKER ğŸš‚</h1>
            <p class="hero-subtitle">The Ultimate Multiplayer Key-Smashing Racing Game!</p>

            <div class="hero-content">
                <div class="menu-section">
                    <h2>ğŸ® Choose Your Game Mode</h2>

                    <!-- Game Mode Selection -->
                    <div class="game-mode-selector">
                        <button id="raceModeBtn" class="mode-btn active">
                            ğŸš‚ Train Race
                            <small>Spam keys to race to center</small>
                        </button>
                        <button id="battleModeBtn" class="mode-btn">
                            ğŸ¦ˆ Typing Shark Battle
                            <small>Type words to attack enemies</small>
                        </button>
                    </div>

                    <div class="menu-buttons">
                        <button id="createRoomBtn" class="menu-btn create-btn">
                            â• Create Room
                        </button>
                        <button id="joinRoomBtn" class="menu-btn join-btn">
                            ğŸšª Join Room
                        </button>
                        <button id="quickPlayBtn" class="menu-btn quick-btn">
                            âš¡ Quick Race
                        </button>
                    </div>
                </div>

                <div class="game-preview">
                    <div class="preview-track">
                        <div class="preview-circle"></div>
                        <div class="preview-train">ğŸš‚</div>
                        <div class="preview-center">ğŸ¯</div>
                    </div>
                </div>
            </div>

            <div class="how-to-play">
                <h3>How to Play:</h3>
                <div class="instructions-grid">
                    <div class="instruction">
                        <span class="icon">âŒ¨ï¸</span>
                        <p>Spam any keyboard keys</p>
                    </div>
                    <div class="instruction">
                        <span class="icon">ğŸƒâ€â™‚ï¸</span>
                        <p>Move your train faster</p>
                    </div>
                    <div class="instruction">
                        <span class="icon">ğŸ†</span>
                        <p>First to center wins!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Room Creation Modal -->
    <div id="createRoomModal" class="modal hidden">
        <div class="modal-content">
            <h2>ğŸ—ï¸ Create New Room</h2>
            <div class="form-group">
                <label for="roomName">Room Name:</label>
                <input type="text" id="roomName" placeholder="Epic Train Race" maxlength="30">
            </div>
            <div class="form-group">
                <label for="playerName">Your Name:</label>
                <input type="text" id="playerName" placeholder="Speed Racer" maxlength="20">
            </div>
            <div class="form-group">
                <label for="maxPlayersSelect">Max Players:</label>
                <select id="maxPlayersSelect">
                    <option value="2">2 Players</option>
                    <option value="4">4 Players</option>
                    <option value="8">8 Players</option>
                    <option value="15" selected>15 Players</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="confirmCreateRoom" class="btn primary">ğŸš‚ Create Room</button>
                <button id="cancelCreateRoom" class="btn secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Join Room Modal -->
    <div id="joinRoomModal" class="modal hidden">
        <div class="modal-content">
            <h2>ğŸšª Join Room</h2>
            <div class="form-group">
                <label for="roomCode">Room Code:</label>
                <input type="text" id="roomCode" placeholder="ABC123" maxlength="6" style="text-transform: uppercase;">
            </div>
            <div class="form-group">
                <label for="joinPlayerName">Your Name:</label>
                <input type="text" id="joinPlayerName" placeholder="Speed Racer" maxlength="20">
            </div>
            <div class="modal-buttons">
                <button id="confirmJoinRoom" class="btn primary">ğŸƒâ€â™‚ï¸ Join Room</button>
                <button id="cancelJoinRoom" class="btn secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Room Lobby Screen -->
    <div id="lobbyScreen" class="lobby-screen hidden">
        <div class="lobby-container">
            <div class="lobby-header">
                <h1 id="lobbyRoomName">Room: Epic Train Race</h1>
                <div class="room-info">
                    <span class="room-code">Room Code: <strong id="lobbyRoomCode">ABC123</strong></span>
                    <span class="player-count">Players: <span id="lobbyPlayerCount">1</span>/<span id="lobbyMaxPlayers">15</span></span>
                </div>
            </div>

            <div class="lobby-content">
                <div class="players-waiting">
                    <h2>ğŸš‚ Players in Lobby</h2>
                    <div id="lobbyPlayersList" class="lobby-players"></div>
                </div>

                <div class="lobby-actions">
                    <button id="startGameBtn" class="btn primary large hidden">ğŸš€ Start Game</button>

                    <!-- AI Controls (only visible to room owner) -->
                    <div id="aiControls" class="ai-controls hidden">
                        <h3>ğŸ¤– AI Players</h3>
                        <div class="ai-buttons">
                            <div class="difficulty-selector">
                                <label for="aiDifficulty">Difficulty:</label>
                                <select id="aiDifficulty">
                                    <option value="easy">Easy</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="hard">Hard</option>
                                </select>
                            </div>
                            <button id="addAIBtn" class="btn primary small">â• Add AI</button>
                            <button id="removeAIBtn" class="btn secondary small">â– Remove AI</button>
                        </div>
                    </div>

                    <button id="leaveLobbyBtn" class="btn secondary">ğŸšª Leave Room</button>
                    <div class="waiting-message">
                        <p>Waiting for room creator to start the game...</p>
                    </div>
                </div>
            </div>

            <div class="lobby-chat">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="Type a message..." maxlength="100">
                    <button id="sendChatBtn">ğŸ“¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="game-container hidden">
        <div class="game-header">
            <h1>ğŸš‚ Keyboard Breaker ğŸš‚</h1>
            <div class="room-info-game">
                <span id="gameRoomName">Room: Epic Race</span>
                <button id="leaveGameBtn" class="btn small secondary">ğŸšª Leave</button>
            </div>
        </div>

        <div class="game-info">
            <div class="player-count">Players: <span id="playerCount">0</span>/<span id="maxPlayerCount">15</span></div>
            <div class="game-status" id="gameStatus">Waiting for players...</div>
        </div>

        <div class="track-container">
            <!-- Horizontal drag race track -->
            <div class="race-track">
                <!-- Start and finish lines -->
                <div class="start-line"></div>
                <div class="finish-line"></div>

                <!-- Track markings (distance markers) -->
                <div class="track-markings"></div>

                <!-- Racing lanes (generated dynamically) -->
                <div class="race-lanes" id="raceLanes"></div>

                <!-- Players will be positioned here -->
                <div id="playersContainer"></div>

                <!-- Finish flag -->
                <div class="finish-flag">ğŸ</div>
            </div>
        </div>

        <div class="controls">
            <div class="instructions">
                <h3>How to Play:</h3>
                <p>ğŸ® Spam any keys on your keyboard to make your train move faster!</p>
                <p>ğŸ”¥ Fast key spamming slows down other players!</p>
                <p>ğŸ First to reach the center wins!</p>
            </div>

            <div class="game-stats">
                <div class="key-counter">
                    Keys pressed: <span id="keyCount">0</span>
                </div>

                <div class="speed-meter">
                    Speed: <span id="speedMeter">0</span> km/h
                </div>

                <div class="sabotage-meter">
                    ğŸ”¥ Sabotage: <span id="sabotageLevel">0</span>%
                </div>

                <div class="slowdown-meter">
                    â„ï¸ Slowed by: <span id="slowdownEffect">0</span>%
                </div>
            </div>
        </div>

        <div class="leaderboard">
            <h3>ğŸ† Leaderboard</h3>
            <ol id="leaderboardList"></ol>
        </div>
    </div>

    <!-- Typing Battle Screen -->
    <div id="battleScreen" class="battle-container hidden">
        <div class="battle-header">
            <h1>ğŸ¦ˆ Typing Shark Battle ğŸ¦ˆ</h1>
            <div class="room-info-battle">
                <span id="battleRoomName">Room: Shark Arena</span>
                <button id="leaveBattleBtn" class="btn small secondary">ğŸšª Leave</button>
            </div>
        </div>

        <div class="battle-stats">
            <div class="players-battle-count">Players: <span id="battlePlayerCount">0</span>/<span id="battleMaxPlayers">8</span></div>
            <div class="battle-status" id="battleStatus">Waiting for battle...</div>
            <div class="battle-timer">Time: <span id="battleTimer">3:00</span></div>
        </div>

        <!-- Current Target Display -->
        <div class="target-display" id="targetDisplay">
            <div class="target-info">
                ğŸ¯ <span class="target-label">Target:</span>
                <span class="target-player" id="currentTarget">Finding target...</span>
            </div>
        </div>

        <!-- Battle Arena -->
        <div class="battle-arena">
            <div class="battle-field">
                <!-- Player health bars -->
                <div id="playerHealthBars" class="health-bars-container"></div>

                <!-- Word targets that appear for typing -->
                <div id="wordTargets" class="word-targets-container"></div>

                <!-- Battle animations and effects -->
                <div id="battleEffects" class="battle-effects"></div>
            </div>
        </div>

        <!-- Typing Input Area -->
        <div class="typing-area">
            <div class="current-word">
                <label>Type any visible word above and hit Enter:</label>
                <div id="currentWordDisplay" class="word-display">Type any visible word</div>
            </div>
            <input type="text" id="typingInput" class="typing-input" placeholder="Type any word above..." autocomplete="off" spellcheck="false">
            <div class="typing-stats">
                <div class="wpm">WPM: <span id="wpmCounter">0</span></div>
                <div class="accuracy">Accuracy: <span id="accuracyCounter">100%</span></div>
                <div class="hits">Hits: <span id="hitCounter">0</span></div>
            </div>
            <div class="damage-legend">
                <small>
                    <span style="color: #2ecc71;">â—</span> 4 letters = 5 damage |
                    <span style="color: #3498db;">â—</span> 5 letters = 7 damage |
                    <span style="color: #f39c12;">â—</span> 6 letters = 9 damage |
                    <span style="color: #e74c3c;">â—</span> 7 letters = 15 damage |
                    <span style="color: #8e44ad;">â—</span> 8 letters = 20 damage
                </small>
            </div>
        </div>

        <!-- Battle Leaderboard -->
        <div class="battle-leaderboard">
            <h3>âš”ï¸ Battle Stats</h3>
            <div id="battleLeaderboardList" class="battle-stats-list"></div>
        </div>
    </div>

    <!-- Winner Alert Modal -->
    <div id="winnerModal" class="modal hidden">
        <div class="modal-content winner-modal-content">
            <div class="winner-announcement">
                <div class="winner-trophy">ğŸ†</div>
                <h2 id="winnerTitle">ğŸ‰ Winner! ğŸ‰</h2>
                <div class="winner-details">
                    <div class="winner-icon" id="winnerIcon">ğŸš‚</div>
                    <div class="winner-name" id="winnerName">Player Name</div>
                </div>
                <div class="winner-stats" id="winnerStats">
                    Keys pressed: <span id="winnerKeyCount">0</span>
                </div>
            </div>

            <!-- Host Controls (only shown to room owner) -->
            <div id="hostControls" class="host-controls hidden">
                <h3>ğŸ® Host Options</h3>
                <div class="host-buttons">
                    <button id="restartGameBtn" class="btn btn-primary">
                        ğŸ”„ Start New Game
                    </button>
                    <button id="endGameBtn" class="btn btn-secondary">
                        ğŸ End Session
                    </button>
                </div>
            </div>

            <!-- Non-host message -->
            <div id="waitingForHost" class="waiting-message hidden">
                <p>â³ Waiting for host to decide...</p>
            </div>

            <!-- Auto-restart countdown -->
            <div id="autoRestartCountdown" class="auto-restart-countdown hidden">
                <p>ğŸ”„ Starting new game in <span id="countdownTimer">5</span> seconds...</p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>